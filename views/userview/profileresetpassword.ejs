<!-- HEADER -->
<header>
  
  
    <%- include('header') -%>
  
  
        <!-- container -->
        <div class="container mt-3">
          <!-- row -->
         
        
  
  
            <div class="text-center text-dark center-div " id="login">

              <h5 class="text-primary" >RESET PASSWORD</h5>
  
  
  
              <div class="row justify-content-center">
                <div class="col-12 col-md-6 col-lg-4" style="min-width: 500px">
                  <div class="card bg-white mb-5 mt-5 pt-5 border-border-primary" style="box-shadow: 0 12px 15px rgba(0, 0, 0, 0.02)">
                    <div class="card-body  ">
                      <div class="container">
                        <div class="col-md-12 mx-auto">
                         
                         
                        </div>
                      </div>
                      <form class="text-start" action="/passwordresetpost" method="post">
                        <span  id="messageContainer" class="text-danger"></span>

                        <div class="otp-field mb-4">
                            <label class="form-label" for="oldpassword">Old password :</label>

                            <input type="password" placeholder="enter old password"  name="oldpass" id="otpform" />

                           
                          </div>
                        <div class="otp-field mb-4">
                            <label class="form-label" for="oldpassword">New password :</label>

                          <input type="password" placeholder="enternewpassword"  name="newpass" id="otpform" />

                         
                        </div>
                        <div class="otp-field mb-4">
                            <label class="form-label" for="oldpassword">Confirm Password : </label>

                          <input type="password" placeholder="confirmpassword"  name="confirmpass" id="otpform" />

                        </div>
                        <div class="text-center">
                            <button class="btn btn-primary  rounded-pill mt-2 w-25" type="submit">Submit</button>

                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
  
  
  
  
              
            </div>
          </div>
  
  
  
  
  
          <script>
            document.querySelector('form').addEventListener('submit', async function (event) {
                event.preventDefault();
          
                // Use FormData to serialize the form data
                const formData = new FormData(this);
                try {
                    const response = await fetch('/passwordresetpost', {
                        method: 'POST',
                        body: new URLSearchParams(formData), // Manually set content type to application/x-www-form-urlencoded
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                    });
          
                    const result = await response.json();
          
                    // Display the message
                    const messageContainer = document.getElementById('messageContainer');
                    messageContainer.innerHTML = `<p>${result.message}</p>`;
          
                    // Show the message container
                    messageContainer.style.display = 'block';
                    setTimeout(() => {
                        messageContainer.style.display = 'none'
                    }, 6000);


          
                    if (result.success) {
                        // Redirect to the specified URL if login is successful
                        window.location.href = result.redirect;
                    }
                } catch (error) {
                    console.error('Error:', error);
                }
            });
          </script>

  
  
  
          <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  
          <style>
      
            .otp-field input {
              height: 45px;
              width: 150px;
              border-radius: 6px;
              outline: none;
              text-align: center;
              border: 1px solid #ddd;
            }
  
            .otp-field input:focus {
              box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
            }
  
            .otp-field input::-webkit-inner-spin-button,
            .otp-field input::-webkit-outer-spin-button {
              display: none;
            }
  
            .resend {
              font-size: 12px;
            }
  
            .footer {
              position: absolute;
              bottom: 10px;
              right: 10px;
              color: black;
              font-size: 12px;
              text-align: right;
            }
  
            .footer a {
              color: black;
              text-decoration: none;
            }
  
  
        
  
             #otpform 
             {
              width: 400px;
              /* font-size: 20px; */
             }
          </style>
  
  
          <%- include('footer') -%>